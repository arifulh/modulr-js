/**
* modulr-js v0.1.1 | 2014-11-20
* AMD Development
* by Helcon Mabesa
* MIT license http://opensource.org/licenses/MIT
**/
!function(a,b){a.Modulr=b}(window,function(a,b){function c(a,b){var c=null;return c=f(a)?a.apply(a,b):a}function d(a){var b="string"==typeof a?a.replace(/\s+/gi,""):"";return b.length>0&&"require"!==b&&"define"!==b&&"exports"!==b&&-1===b.indexOf("**")?!0:!1}function e(){var a=window.location,b=a.pathname.split("/");return b.pop(),b=b.join("/")+"/",a.protocol+"//"+(a.host||a.hostname)+b}function f(a){return"function"==typeof a?!0:!1}function g(a){return"object"!=typeof a||h(a)?!1:!0}function h(a){return a=a||!1,"[object Array]"===Object.prototype.toString.call(a)}function i(){var a=arguments;if("string"==typeof a[0]&&(a[0]=[k.prefix,a[0]].join(" ")),window.console&&window.console.log)try{return console.log.apply(console,a)}catch(b){console.log(a)}}function j(a){throw a=[k.prefix,a].join(" "),new Error(a)}var k={};k.prefix="[Modulr]";var l={},m=!1,n=!1;a(function(){m=!0});var o=function(k){function m(){k.baseUrl=k.baseUrl||e(),k.instanceDeps?loadInstanceDependencies(k.instanceDeps,function(){x=!0}):x=!0}function p(a){var b=null;if(h(a))r(a);else if(v[a]){{var d=v[a];d.factory}if(!d.executed){d.executed=!0;var e=q(a,d.deps);v[a].factory=c(d.factory,e)}b=v[a]}return b}function q(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];h(e)?c.push(r(e,a)):"string"==typeof e?c=t(c,e,a):(i("dependency:"),i(e),j("invalid dependency"))}return c}function r(a,b){for(var c={},d=0;d<a.length;d++){var e=a[d];"string"==typeof e?c=t(c,e,b):(i("dependency:"),i(e),j("invalid dependency"))}return c}function s(a,b){var c=[],d=a.replace("**","");for(var e in v)0===e.indexOf(d)&&c.push(e);var f=r(c,b);return v[a]={executed:!0,exports:{},deps:[],factory:f},f}function t(a,b,c){return h(a)?a.push("define"===b?y.define:"require"===b?y.require:"exports"===b?v[c].exports:v[b]?p(b).factory:isSelector(b)?s(b,c):null):g(a)&&(a[b]="define"===b?y.define:"require"===b?y.require:"exports"===b?v[c].exports:v[b]?p(b).factory:null),a}k=k||{};var u=k.context||"Modulr";l[u]&&j("cannot instantiate multiple contexts: '"+u+"'"),l[u]={instance:this,stack:{}};var v=l[u].stack,w=!1,x=!1;this.version="0.1.1";var y=this;y.config=function(a){k=a},y.getConfig=function(){return k},y.define=function(a,b,c){d(a)||j("invalid id: '"+a+"'."),v[a]||(b=b||[],v[a]={executed:!1,exports:{},deps:b,factory:c})},y.require=function(c,d){w||(w=!0,m());var e=function(){var a=null,b=p(c);return b&&(a=b.exports||b.factory),a},g=function(){var a=e();return h(c)?void(f(d)&&d()):a};return x?g():void a(function(){b(function(){return x},function(){g()})})},y.instantiate=function(a){a.context||j("instantiation requires a context!");var b=new o(a);return delete b.instantiate,b},y.ready=function(){n=!0}};return new o}(function(){var a=function(){function a(a){for(m=1;a=c.shift();)a()}var b,c=[],d=!1,e=document,f=e.documentElement,g=f.doScroll,h="DOMContentLoaded",i="addEventListener",j="onreadystatechange",k="readyState",l=g?/^loaded|^c/:/^loaded|c/,m=l.test(e[k]);return e[i]&&e[i](h,b=function(){e.removeEventListener(h,b,d),a()},d),g&&e.attachEvent(j,b=function(){/^c/.test(e[k])&&(e.detachEvent(j,b),a())}),ready=g?function(a){self!=top?m?a():c.push(a):function(){try{f.doScroll("left")}catch(b){return setTimeout(function(){ready(a)},50)}a()}()}:function(a){m?a():c.push(a)}}();return a}(),function(){var a=function(){function a(a){return"number"==typeof a?!0:!1}function b(a){return"function"==typeof a?!0:!1}var c={attempts:999,timeout:500},d=arguments,e=!1;a(d[0])&&a(d[1])&&b(d[2])&&b(d[3])?e={attempts:d[0],timeout:d[1],check:d[2],success:d[3],expires:b(d[4])?d[4]:!1}:a(d[0])&&b(d[1])&&b(d[2])?e={attempts:d[0],timeout:c.timeout,check:d[1],success:d[2],expires:b(d[3])?d[3]:!1}:b(d[0])&&b(d[1])&&(e={attempts:c.attempts,timeout:c.timeout,check:d[0],success:d[1],expires:b(d[2])?d[2]:!1});var f,g=!1,h=function(){g?(clearTimeout(f),e.expires("aborted")):e.check()?(e.success(),clearTimeout(f)):e.attempts>0?f=setTimeout(function(){h()},e.timeout):e.expires("expired"),e.attempts--};return h(),{abort:function(){g=!0}}};return a}()));